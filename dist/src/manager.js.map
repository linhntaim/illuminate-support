{"version":3,"sources":["../../src/manager.js"],"names":["Manager","app","customCreators","drivers","driver","getDefaultDriver","createDriver","callCustomCreator","method","Str","studly","callback","params"],"mappings":"gGAAA,kD,2sBAEqBA,CAAAA,O,yBACjB,iBAAYC,GAAZ,CAAiB,+BACb,KAAKA,GAAL,CAAWA,GAAX,CACA,KAAKC,cAAL,CAAsB,EAAtB,CACA,KAAKC,OAAL,CAAe,EAClB,C,oDAED,2BAAmB,CACf,MAAO,KACV,C,sBAED,iBAAsB,IAAfC,CAAAA,OAAe,2DAAN,IAAM,CAClBA,OAAM,CAAGA,OAAM,CAAGA,OAAH,CAAY,KAAKC,gBAAL,EAA3B,CAEA,GAAI,CAACD,OAAL,CAAa,CACT,MAAO,KACV,CAED,GAAI,EAAEA,OAAM,GAAI,MAAKD,OAAjB,CAAJ,CAA+B,CAC3B,KAAKA,OAAL,CAAaC,OAAb,EAAuB,KAAKE,YAAL,CAAkBF,OAAlB,CAC1B,CAED,MAAO,MAAKD,OAAL,CAAaC,OAAb,CACV,C,4BAED,sBAAaA,MAAb,CAAqB,CACjB,GAAIA,MAAM,GAAI,MAAKF,cAAnB,CAAmC,CAC/B,MAAO,MAAKK,iBAAL,CAAuBH,MAAvB,CACV,CAFD,IAGK,CACD,GAAMI,CAAAA,MAAM,CAAG,SAAWC,gBAAIC,MAAJ,CAAWN,MAAX,CAAX,CAAgC,QAA/C,CAEA,GAAI,KAAKI,MAAL,CAAJ,CAAkB,CACd,MAAO,MAAKA,MAAL,GACV,CACJ,CACD,MAAO,KACV,C,iCAED,2BAAkBJ,MAAlB,CAA0B,CACtB,MAAO,MAAKF,cAAL,CAAoBE,MAApB,EAA4B,KAAKH,GAAjC,CACV,C,sBAED,gBAAOG,MAAP,CAAeO,QAAf,CAAyB,CACrB,KAAKT,cAAL,CAAoBE,MAApB,EAA8BO,QAA9B,CACA,MAAO,KACV,C,0BAED,qBAAa,CACT,MAAO,MAAKR,OACf,C,sBAED,gBAAOK,MAAP,CAA0B,CACtB,GAAMJ,CAAAA,MAAM,CAAG,KAAKA,MAAL,EAAf,CADsB,8BAARQ,MAAQ,qDAARA,MAAQ,yBAEtB,MAAOR,CAAAA,MAAM,EAAII,MAAM,GAAIJ,CAAAA,MAApB,CAA6BA,MAAM,CAACI,MAAD,CAAN,OAAAJ,MAAM,CAAYQ,MAAZ,CAAnC,CAAyD,IACnE,C","sourcesContent":["import Str from './str'\r\n\r\nexport default class Manager {\r\n    constructor(app) {\r\n        this.app = app\r\n        this.customCreators = {}\r\n        this.drivers = {}\r\n    }\r\n\r\n    getDefaultDriver() {\r\n        return null\r\n    }\r\n\r\n    driver(driver = null) {\r\n        driver = driver ? driver : this.getDefaultDriver()\r\n\r\n        if (!driver) {\r\n            return null\r\n        }\r\n\r\n        if (!(driver in this.drivers)) {\r\n            this.drivers[driver] = this.createDriver(driver)\r\n        }\r\n\r\n        return this.drivers[driver]\r\n    }\r\n\r\n    createDriver(driver) {\r\n        if (driver in this.customCreators) {\r\n            return this.callCustomCreator(driver)\r\n        }\r\n        else {\r\n            const method = 'create' + Str.studly(driver) + 'Driver'\r\n\r\n            if (this[method]) {\r\n                return this[method]()\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    callCustomCreator(driver) {\r\n        return this.customCreators[driver](this.app)\r\n    }\r\n\r\n    extend(driver, callback) {\r\n        this.customCreators[driver] = callback\r\n        return this\r\n    }\r\n\r\n    getDrivers() {\r\n        return this.drivers\r\n    }\r\n\r\n    __call(method, ...params) {\r\n        const driver = this.driver()\r\n        return driver && method in driver ? driver[method](...params) : null\r\n    }\r\n}"],"file":"manager.js"}